# ネームカードデバッグ

- ちょっと時間のある方向け
- しっかり見ていただける方向け

## ちょっと時間のある方向けに 10 分デバッグ

デスクトップだけではなくスマフォでもチェックしていただければ幸いです。

1. プレビュー用 URL にアクセスします。
2. 「ネームカードを作成する」ボタンをクリックする
3. 文言を読み、「ログインする」ボタンをクリックする
4. GitHub or Google お好みのソーシャルアカウントでログインする
5. 文言を読み、「編集する」ボタンをクリックする
6. 「ネームカード作成・編集」画面で、お名前、アバター画像、注文番号（適当な文字列を入力いただいて OK）項目を入力する。なお、注文番号に対するバリデーションは、現在盛り込まれていません。
7. 「確定する」ボタンをクリックする
8. 入力した内容がネームカードに反映され、ステータスが「注文番号照合中」になっているかどうかを確認します。

## しっかり見ていただける方向けに複数パターンデバッグ

::: tip

ネームカードが作成される際、チケット購入時に発行される注文番号との照合が必要になります。この照合作業は、ネームカード本リリース以降 1 日 4 回、自動的に行われる予定となります。

:::

各デバッグ実施者が手動で照合を完了 or 失敗させることを目指します。

Supabase の管理画面より SQL Editor（赤枠）を開きます。

![](https://i.imgur.com/ss9PkSd.png)

SQL Editor を開いて、SQL 入力エリア（赤枠）に以下の SQL を入力してください。

![](https://i.imgur.com/gpgy1NC.png)

その際、事前にユーザー ID を記録しておき、そのユーザー ID を `<user_id>` の箇所に代入、「RUN（実行する）」ボタンをクリックします。

```sql
-- 照合完了に変更したい
UPDATE public.attendees
SET activated_at = now()
WHERE user_id = '<user_id>' AND activated_at IS NULL;
```

```sql
-- 照合失敗に変更したい
UPDATE public.attendees
SET canceled_at = now()
WHERE user_id = '<user_id>' AND canceled_at IS NULL;
```

スタッフ管理画面で照合を完了 or 失敗させることが可能となります。

あくまで「注文番号に依らず」照合を完了 or 失敗させることになる点にはご留意ください。

したがって、この方法はデバッグ時にのみ利用しつつ、本りりーす以降は利用しないようご協力いただければ幸いです。

### スタッフ管理画面より操作する方法について

照合完了 or 照合失敗を果たしていない者は、action 列にある「Activate or Deactivate」ボタンをクリックできる状態となります。

この「Activate or Deactivate」ボタンをクリックすることで、該当するユーザーのステータスが「注文番号照合完了 or 注文番号照合失敗」になっているかどうか確認します。

![](https://i.imgur.com/bDa1Kto.png)
